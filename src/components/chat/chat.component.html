<div class="flex flex-col h-full w-full bg-slate-900/50 rounded-lg border border-slate-800 shadow-2xl">
  <div #scrollContainer class="flex-grow p-6 overflow-y-auto space-y-6">
    @for (message of messages(); track $index) {
      <div class="flex" [class.justify-end]="message.role === 'user'">
        <div 
          class="max-w-xl p-4 rounded-xl"
          [class]="message.role === 'user' ? 'bg-teal-600 text-white' : 'bg-slate-800 text-slate-200'">
          <div class="prose prose-invert max-w-none" [innerHTML]="message.parts[0].text | safeHtml"></div>
        </div>
      </div>
    }
    @if (isLoading()) {
      <div class="flex">
        <div class="max-w-xl p-4 rounded-xl bg-slate-800 text-slate-200">
            <app-cognitive-stream></app-cognitive-stream>
        </div>
      </div>
    }
  </div>
  <div class="flex-shrink-0 p-4 border-t border-slate-800 bg-slate-900/80">
    <form (ngSubmit)="sendMessage()" class="flex items-center space-x-4">
      <textarea 
        [(ngModel)]="userInput" 
        name="userInput"
        (keydown.enter)="handleKeydown($event)"
        placeholder="Ask Hamdy anything..."
        class="flex-grow bg-slate-800 border border-slate-700 rounded-lg p-3 resize-none focus:outline-none focus:ring-2 focus:ring-teal-500"
        rows="1"></textarea>
      <button 
        type="submit" 
        [disabled]="isLoading() || !userInput.trim()"
        class="bg-teal-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-teal-500 disabled:bg-slate-700 disabled:cursor-not-allowed transition-colors">
        Send
      </button>
    </form>
  </div>
</div>
